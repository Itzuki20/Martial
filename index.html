
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Martial Arts RPG</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: url('assets/sect_background.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
    }
    #game {
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      background: rgba(30,30,30,0.9);
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
    }
    .choice-button {
      display: block;
      margin: 10px 0;
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: #272727;
      color: white;
      cursor: pointer;
    }
    .choice-button:hover {
      background: #444;
    }
    #log {
      white-space: pre-wrap;
      margin-top: 10px;
      border-top: 1px solid #555;
      padding-top: 10px;
    }
  </style>
</head>
<body>
  <audio id="bgm" src="assets/background_music.mp3" autoplay loop></audio>
  <audio id="hit" src="assets/combat_hit.wav"></audio>

  <div id="game">
    <h1>Martial Arts RPG</h1>
    <div id="story"></div>
    <div id="choices"></div>
    <div id="log"></div>
  </div>

  <script>
    const storyText = {
      start: {
        text: "You wake up in a hidden valley. Two paths lie ahead: one toward the sect, another toward the shadows...",
        choices: [
          { text: "Join a Sect", next: "sectIntro" },
          { text: "Walk the Rogue Path", next: "rogueIntro" }
        ]
      },
      sectIntro: {
        text: "You kneel before the Elder. You are now an Outer Disciple of the Iron Will Sect. Missions await.",
        choices: [
          { text: "Accept Herb Gathering Mission", next: "herbMission" },
          { text: "Explore Sect Grounds", next: "sectExplore" }
        ]
      },
      herbMission: {
        text: "You enter a dungeon and find glowing spirit herbs... and a beast guarding them!",
        choices: [
          { text: "Fight the Beast", next: "beastFight" },
          { text: "Sneak and Grab Herbs", next: "herbGrab" }
        ]
      },
      beastFight: {
        text: "You engage in a fierce battle!",
        choices: [
          { text: "Attack!", next: "attackResult" }
        ]
      },
      attackResult: {
        text: "Your Shadow Palm strikes true! The beast is defeated!",
        choices: [
          { text: "Return as Hero", next: "sectIntro" }
        ]
      },
      rogueIntro: {
        text: "The wind howls as you tie your blade to your back. You are alone, a rogue cultivator of the shadows.",
        choices: [
          { text: "Search for Forbidden Inheritance", next: "forbiddenPath" },
          { text: "Head to Black Market", next: "blackMarket" }
        ]
      },
      forbiddenPath: {
        text: "You uncover a sealed scroll. You learn a forbidden art: Shadow Bloom Slash.",
        choices: [
          { text: "Test the Skill", next: "testSkill" },
          { text: "Hide it for Later", next: "rogueIntro" }
        ]
      },
      testSkill: {
        text: "The forbidden skill is powerful, but it attracts rogue hunters. Prepare to defend yourself!",
        choices: [
          { text: "Fight Off Hunters", next: "rogueIntro" }
        ]
      },
      blackMarket: {
        text: "You meet a trader who offers Bloom Tracker for rare herb events.",
        choices: [
          { text: "Buy Tracker", next: "trackerBuy" },
          { text: "Decline", next: "rogueIntro" }
        ]
      },
      trackerBuy: {
        text: "You now sense upcoming bloom events in Red and Black Zones. The hunt begins.",
        choices: [
          { text: "Chase Bloom Events", next: "rogueIntro" }
        ]
      },
      sectExplore: {
        text: "You learn pill refinement and spar with a senior disciple. Your strength grows steadily.",
        choices: [
          { text: "Return to Main Hall", next: "sectIntro" }
        ]
      },
      herbGrab: {
        text: "You sneak past, but only collect common herbs. It's enough to survive.",
        choices: [
          { text: "Return Quietly", next: "sectIntro" }
        ]
      }
    };

    let log = [];

    function showScene(key) {
      const scene = storyText[key];
      document.getElementById('story').innerText = scene.text;
      const choicesDiv = document.getElementById('choices');
      choicesDiv.innerHTML = '';

      scene.choices.forEach(choice => {
        const btn = document.createElement('button');
        btn.className = 'choice-button';
        btn.innerText = choice.text;
        btn.onclick = () => {
          log.push(`> ${choice.text}`);
          if (choice.text.toLowerCase().includes('attack') || choice.text.toLowerCase().includes('fight')) {
            document.getElementById('hit').play();
          }
          showScene(choice.next);
          updateLog();
        };
        choicesDiv.appendChild(btn);
      });
    }

    function updateLog() {
      document.getElementById('log').innerText = log.join('\n');
    }

    showScene('start');
  </script>
</body>
</html>
